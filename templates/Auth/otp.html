<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verify OTP</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Outfit',sans-serif}
:root{
--bg-dark:#050505;
--text-main:#fff;
--text-muted:#94a3b8;
--blue:#3b82f6;
--orange:#f97316;
}

html,body{
width:100%;
height:100%;
background:var(--bg-dark);
color:var(--text-main);
}

.container{
min-height:100svh;               /* FIX MOBILE VIEWPORT */
display:flex;
align-items:center;              /* TRUE VERTICAL CENTER */
justify-content:center;
padding:16px;
padding-bottom:env(safe-area-inset-bottom);
}

.form-wrapper{
width:100%;
max-width:420px;
padding:28px;
}

.header{text-align:center;margin-bottom:26px}
.header h1{font-size:1.8rem}
.header p{color:var(--text-muted);margin-top:6px}

.otp-box{
display:flex;
gap:10px;
justify-content:center;
margin-bottom:22px;
}

.otp-box input{
width:48px;
height:56px;
text-align:center;
font-size:1.3rem;
border-radius:12px;
background:#111;
border:1px solid #333;
color:#fff;
}

.otp-box input:focus{
outline:none;
border-color:var(--blue);
}

.btn-primary{
width:100%;
padding:14px;
border:none;
border-radius:12px;
background:linear-gradient(90deg,var(--blue),var(--orange));
color:#fff;
font-weight:600;
font-size:1rem;
cursor:pointer;
}

.resend{
margin-top:16px;
text-align:center;
font-size:.9rem;
color:var(--text-muted);
}

.resend button{
background:none;
border:none;
color:var(--blue);
cursor:pointer;
font-weight:600;
}
@media (max-width: 768px){
.container{
min-height:50svh;
}
}
</style>

</head>

<body>

<div class="container">
<div class="form-wrapper">

<div class="header">
<h1>Verify OTP</h1>
<p>OTP sent to <strong>{{ phone }}</strong></p>
</div>

<form method="POST" action="{% url 'verify_otp' %}">
{% csrf_token %}
<input type="hidden" name="phone" value="{{ phone }}">
<input type="hidden" name="mode" value="{{ mode }}">
<input type="hidden" name="next" value="{{ next }}">

<div class="otp-box">
<input type="text" maxlength="1" inputmode="numeric" required>
<input type="text" maxlength="1" inputmode="numeric" required>
<input type="text" maxlength="1" inputmode="numeric" required>
<input type="text" maxlength="1" inputmode="numeric" required>
<input type="text" maxlength="1" inputmode="numeric" required>
<input type="text" maxlength="1" inputmode="numeric" required>
</div>

<input type="hidden" name="otp" id="otpInput">

<button class="btn-primary">Verify & Continue</button>
</form>

<div class="resend">
Didnâ€™t receive OTP?
<form method="POST" action="{% url 'send_otp' %}" style="display:inline">
{% csrf_token %}
<input type="hidden" name="phone" value="{{ phone }}">
<input type="hidden" name="mode" value="{{ mode }}">
<button type="submit">Resend</button>
</form>
</div>

</div>
</div>

<script>
const inputs=document.querySelectorAll(".otp-box input")
const otpHidden=document.getElementById("otpInput")

inputs.forEach((input,index)=>{
input.addEventListener("input",()=>{
if(input.value && index < inputs.length-1){
inputs[index+1].focus()
}
updateOTP()
})
input.addEventListener("keydown",e=>{
if(e.key==="Backspace" && !input.value && index>0){
inputs[index-1].focus()
}
})
})

function updateOTP(){
let otp=""
inputs.forEach(i=>otp+=i.value)
otpHidden.value=otp
}
</script>

</body>
</html>
